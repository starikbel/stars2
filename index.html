<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé≤ –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –ß–µ–ª–ª–µ–Ω–¥–∂ ‚Äî –†–∞–Ω–¥–æ–º –ó–∞–¥–∞–Ω–∏–µ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@700&display=swap');

        :root {
            --logo-size: 140px;           /* ‚Üê –ò–ó–ú–ï–ù–ò –≠–¢–û –ß–ò–°–õ–û, —á—Ç–æ–±—ã –ø–æ–º–µ–Ω—è—Ç—å —Ä–∞–∑–º–µ—Ä –ª–æ–≥–æ—Ç–∏–ø–∞ */
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: #fff;
            font-family: 'Roboto', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle, rgba(255,255,255,0.08) 1px, transparent 1px);
            background-size: 60px 60px;
            pointer-events: none;
            animation: stars 25s linear infinite;
        }

        @keyframes stars { 0% { background-position: 0 0; } 100% { background-position: 300px 300px; } }

        .container {
            text-align: center;
            z-index: 10;
            max-width: 920px;
            padding: 30px;
        }

        .logo-area {
            margin-bottom: 15px;
        }

        #logo {
            height: auto;
            max-height: var(--logo-size);
            width: auto;
            max-width: 90%;
            object-fit: contain;           /* ‚Üê –≥–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ: –ª–æ–≥–æ—Ç–∏–ø –≤–∏–¥–µ–Ω —Ü–µ–ª–∏–∫–æ–º */
            filter: drop-shadow(0 0 25px #00ffea);
            transition: all 0.4s;
        }

        h1 {
            font-family: 'Press Start 2P', cursive;
            font-size: 2.8rem;
            margin: 10px 0 25px;
            text-shadow: 0 0 20px #00ffea,
                         0 0 40px #00ffea;
            color: #00ffea;
        }

        #result {
            display: none;                 /* —Å–∫—Ä—ã—Ç–æ –¥–æ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ */
            font-size: 1.35rem;
            color: #ff00aa;
            text-shadow: 0 0 15px #ff00aa;
            margin-bottom: 12px;
            font-weight: bold;
        }

        .display {
            background: rgba(255,255,255,0.1);
            border: 6px solid #00ffea;
            border-radius: 20px;
            padding: 45px 35px;
            min-height: 240px;
            font-size: 2.15rem;
            line-height: 1.35;
            margin: 0 auto;
            max-width: 820px;
            box-shadow: 0 0 60px rgba(0, 255, 234, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition: all 0.4s;
        }

        .display.glow {
            animation: finalGlow 1.2s infinite alternate;
            border-color: #ff00aa;
        }

        @keyframes finalGlow {
            from { box-shadow: 0 0 60px rgba(0, 255, 234, 0.7); }
            to   { box-shadow: 0 0 130px #ff00aa, 0 0 180px #00ffea; }
        }

        button {
            font-family: 'Press Start 2P', cursive;
            font-size: 1.65rem;
            padding: 22px 65px;
            background: #ff00aa;
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            box-shadow: 0 0 35px #ff00aa;
            transition: all 0.3s;
        }

        button:hover {
            transform: scale(1.08);
            box-shadow: 0 0 70px #ff00aa;
        }

        .upload-area {
            margin: 25px 0 10px;
        }

        .upload-label {
            display: inline-block;
            padding: 12px 28px;
            background: rgba(255,255,255,0.15);
            border: 2px dashed #00ffea;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .upload-label:hover {
            background: rgba(0, 255, 234, 0.2);
            border-color: #ff00aa;
        }

        .copy-btn {
            margin-top: 25px;
            padding: 14px 35px;
            font-size: 1.2rem;
            background: #00ffea;
            color: #000;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –õ–û–ì–û -->
        <div class="logo-area">
            <img id="logo" src="logo.png" alt="–¢–≤–æ–π –ª–æ–≥–æ—Ç–∏–ø">
        </div>

        <h1>üé≤ –ì–†–ê–§–ò–ß–ï–°–ö–ò–ô –ß–ï–õ–õ–ï–ù–î–ñ</h1>

        <!-- –ù–ê–î–ü–ò–°–¨ –ù–ê–î –û–ö–ù–û–ú –° –ó–ê–î–ê–ù–ò–ï–ú -->
        <div id="result">‚úÖ –ì–û–¢–û–í–û! –í–æ—Ç —Ç–≤–æ—ë –∑–∞–¥–∞–Ω–∏–µ:</div>
        
        <div id="display" class="display">–ù–∞–∂–º–∏ ¬´–ö–†–£–¢–ò–¢–¨!¬ª, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ!</div>
        
        <button onclick="startSpin()">üöÄ –ö–†–£–¢–ò–¢–¨ –ó–ê–î–ê–ù–ò–ï!</button>

        <!-- –ö–ù–û–ü–ö–ê –ó–ê–ì–†–£–ó–ö–ò (–∏—Å—á–µ–∑–Ω–µ—Ç –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏) -->
        <div id="uploadArea" class="upload-area">
            <label class="upload-label">
                üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ–π PNG-–ª–æ–≥–æ—Ç–∏–ø
                <input type="file" id="logoUpload" accept="image/png" style="display:none;">
            </label>
        </div>

        <button id="copyBtn" onclick="copyTask()" class="copy-btn" style="display:none;">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
    </div>

    <script src="tasks.js"></script>
    <script>
        let currentTask = "";
        let isSpinning = false;

        const logoImg = document.getElementById('logo');
        const logoUpload = document.getElementById('logoUpload');
        const uploadArea = document.getElementById('uploadArea');
        const resultDiv = document.getElementById('result');
        const display = document.getElementById('display');
        const copyBtn = document.getElementById('copyBtn');

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ—Ç–∏–ø–∞
        function loadSavedLogo() {
            const saved = localStorage.getItem('challengeLogo');
            if (saved) {
                logoImg.src = saved;
                uploadArea.style.display = 'none';   // –µ—Å–ª–∏ —É–∂–µ –±—ã–ª –∑–∞–≥—Ä—É–∂–µ–Ω ‚Äî —Å—Ä–∞–∑—É —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
            }
        }

        logoUpload.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file || !file.type.startsWith('image/png')) return;

            const reader = new FileReader();
            reader.onload = function(ev) {
                logoImg.src = ev.target.result;
                localStorage.setItem('challengeLogo', ev.target.result);
                uploadArea.style.display = 'none';   // ‚Üê –∫–Ω–æ–ø–∫–∞ –∏—Å—á–µ–∑–∞–µ—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
            };
            reader.readAsDataURL(file);
        });

        window.onload = () => {
            loadSavedLogo();
        };

        // –°–ü–ò–ù –° –ß–Å–¢–ö–û–ô –û–°–¢–ê–ù–û–í–ö–û–ô
        function startSpin() {
            if (isSpinning) return;
            isSpinning = true;

            resultDiv.style.display = 'none';
            copyBtn.style.display = 'none';
            display.classList.remove('glow');

            let delay = 18;
            const totalSteps = 68;
            let step = 0;

            function spinLoop() {
                const randomIndex = Math.floor(Math.random() * window.tasks.length);
                currentTask = window.tasks[randomIndex];
                display.textContent = currentTask;

                step++;

                if (step > 45) delay = 45 + (step - 45) * 11;
                if (step > 58) delay = 120 + (step - 58) * 28;

                if (step < totalSteps) {
                    setTimeout(spinLoop, delay);
                } else {
                    isSpinning = false;
                    display.classList.add('glow');
                    resultDiv.style.display = 'block';     // ‚Üê –Ω–∞–¥–ø–∏—Å—å –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ù–ê–î –∑–∞–¥–∞–Ω–∏–µ–º
                    copyBtn.style.display = 'inline-block';
                }
            }

            spinLoop();
        }

        function copyTask() {
            if (!currentTask) return;
            navigator.clipboard.writeText(currentTask).then(() => {
                const old = copyBtn.textContent;
                copyBtn.textContent = "‚úÖ –°–ö–û–ü–ò–†–û–í–ê–ù–û!";
                setTimeout(() => copyBtn.textContent = old, 1800);
            });
        }
    </script>
</body>
</html>